!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("libtemplate",e):(t=t||self).libtemplate=e()}(this,function(){"use strict";return function(){for(var t=this,e=[],i=arguments.length;i--;)e[i]=arguments[i];this.animating=!1;var n,a,p,o,u=0,m=10,s=30,r=20,f={output:0,velocity:0,amplitude:0},c=[],l=function(t,e,i){return t*(i-e)/100+e};e.map(function(e){void 0!==e.propName?(t[e.propName]=Object.assign({},f),t[e.propName].stiffness=e.input||u,t[e.propName].stiffness=e.stiffness||m,t[e.propName].damping=e.damping||s,t[e.propName].mass=e.mass||r,t[e.propName].input=e.input||u,t[e.propName].output=t[e.propName].input,c.push(t[e.propName])):t.callback=e}),this.animate=function(){var e;a=Date.now(),t.animating||(n=a-1),p=a-n,n=a,t.animating=!0,c.forEach(function(t){var e,i,n,a,o,u;i=l((e=t).stiffness,-1,-300),n=l(e.damping,-.4,-20),a=l(e.mass,.1,10),o=i*(e.output-e.input),u=n*e.velocity,e.amplitude=(o+u)/a,e.velocity+=e.amplitude*(p/1e3),e.output+=e.velocity*(p/1e3)}),(e=t).callback.apply(e,c),c.every(function(t){return Math.abs(t.velocity)<.5&&Math.abs(t.output-t.input)<.5})?(t.animating=!1,console.log("finished spring animation")):(cancelAnimationFrame(o),o=requestAnimationFrame(t.animate))}}});