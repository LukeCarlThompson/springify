(function(i,s){typeof exports=="object"&&typeof module<"u"?s(exports):typeof define=="function"&&define.amd?define(["exports"],s):(i=typeof globalThis<"u"?globalThis:i||self,s(i.springify={}))})(this,function(i){"use strict";var E=Object.defineProperty;var j=i=>{throw TypeError(i)};var X=(i,s,e)=>s in i?E(i,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[s]=e;var v=(i,s,e)=>X(i,typeof s!="symbol"?s+"":s,e),x=(i,s,e)=>s.has(i)||j("Cannot "+e);var t=(i,s,e)=>(x(i,s,"read from private field"),e?e.call(i):s.get(i)),a=(i,s,e)=>s.has(i)?j("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(i):s.set(i,e),h=(i,s,e,o)=>(x(i,s,"write to private field"),o?o.call(i,e):s.set(i,e),e);var e,o,r,b,f,d,m,c,l,g,y,w,T,S,F;class s{constructor({input:n=0,stiffness:p=10,damping:u=30,mass:M=20}={}){v(this,"stiffness");v(this,"damping");v(this,"mass");a(this,e);a(this,o);a(this,r,0);a(this,b,0);a(this,f);a(this,d);a(this,m);a(this,c);a(this,l);a(this,g,new Set);a(this,y,new Set);a(this,w,()=>{t(this,f)||t(this,T).call(this)});a(this,T,()=>{h(this,m,Date.now()),t(this,f)||h(this,d,t(this,m)-1),h(this,c,t(this,m)-t(this,d)),h(this,d,t(this,m)),h(this,f,!0),t(this,F).call(this),t(this,g).forEach(n=>{n({output:t(this,o),velocity:t(this,r)})}),h(this,f,!(Math.abs(t(this,r))<.1&&Math.abs(t(this,o)-t(this,e))<.01)),t(this,f)?(cancelAnimationFrame(t(this,l)),h(this,l,requestAnimationFrame(t(this,T)))):(h(this,f,!1),t(this,y).forEach(n=>{n({output:t(this,o),velocity:t(this,r)})}))});a(this,S,(n,p,u)=>n*(u-p)/100+p);a(this,F,()=>{const n=t(this,S).call(this,this.stiffness,-1,-300),p=t(this,S).call(this,this.damping,-.4,-20),u=t(this,S).call(this,this.mass,.1,10),M=n*(t(this,o)-t(this,e)),A=p*t(this,r);h(this,b,(M+A)/u),h(this,r,t(this,r)+t(this,b)*(t(this,c)/1e3)),h(this,o,t(this,o)+t(this,r)*(t(this,c)/1e3))});v(this,"subscribe",(n,p="frame")=>{let u;return p=="frame"?(t(this,g).add(n),u=()=>{t(this,g).delete(n)}):(t(this,y).add(n),u=()=>{t(this,y).delete(n)}),u});h(this,f,!1),h(this,d,0),h(this,m,0),h(this,c,0),h(this,l,0),this.stiffness=p,this.damping=u,this.mass=M,h(this,e,n),h(this,o,n)}set input(n){h(this,e,n),t(this,w).call(this)}get input(){return t(this,e)}get output(){return t(this,o)}}e=new WeakMap,o=new WeakMap,r=new WeakMap,b=new WeakMap,f=new WeakMap,d=new WeakMap,m=new WeakMap,c=new WeakMap,l=new WeakMap,g=new WeakMap,y=new WeakMap,w=new WeakMap,T=new WeakMap,S=new WeakMap,F=new WeakMap,i.Springify=s,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})});
