!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define("springify",i):(t=t||self).springify=i()}(this,function(){"use strict";return function(){for(var t=this,i=[],n=arguments.length;n--;)i[n]=arguments[n];this.animating=!1;var e,a,p,o,s=0,u=10,m=30,r=20,f={output:0,velocity:0,amplitude:0},c=[],l=function(t,i,n){return t*(n-i)/100+i};i.map(function(i){void 0!==i.propName?(t[i.propName]=Object.assign({},f),t[i.propName].stiffness=i.input||s,t[i.propName].stiffness=i.stiffness||u,t[i.propName].damping=i.damping||m,t[i.propName].mass=i.mass||r,t[i.propName].input=i.input||s,t[i.propName].output=t[i.propName].input,c.push(t[i.propName])):t.callback=i}),this.animate=function(){var i;a=Date.now(),t.animating||(e=a-1),p=a-e,e=a,t.animating=!0,c.forEach(function(t){var i,n,e,a,o,s;n=l((i=t).stiffness,-1,-300),e=l(i.damping,-.4,-20),a=l(i.mass,.1,10),o=n*(i.output-i.input),s=e*i.velocity,i.amplitude=(o+s)/a,i.velocity+=i.amplitude*(p/1e3),i.output+=i.velocity*(p/1e3)}),(i=t).callback.apply(i,c),c.every(function(t){return Math.abs(t.velocity)<.5&&Math.abs(t.output-t.input)<.5})?(t.animating=!1,console.log("finished spring animation")):(cancelAnimationFrame(o),o=requestAnimationFrame(t.animate))}}});