(function(s,i){typeof exports=="object"&&typeof module!="undefined"?i(exports):typeof define=="function"&&define.amd?define(["exports"],i):(s=typeof globalThis!="undefined"?globalThis:s||self,i(s.Springify={}))})(this,function(s){"use strict";var g=Object.defineProperty;var T=(s,i,e)=>i in s?g(s,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[i]=e;var t=(s,i,e)=>(T(s,typeof i!="symbol"?i+"":i,e),e);class i{constructor({input:a=0,stiffness:u=10,damping:p=30,mass:r=20,onFrame:l=()=>{},onFinished:c=()=>{}}){t(this,"_input");t(this,"output");t(this,"stiffness");t(this,"damping");t(this,"mass");t(this,"velocity",0);t(this,"amplitude",0);t(this,"animating");t(this,"onFrame");t(this,"onFinished");t(this,"lastTime");t(this,"currentTime");t(this,"delta");t(this,"animationFrame");t(this,"interpolate");t(this,"animate");t(this,"animLoop");this.animating=!1,this.onFrame=l,this.onFinished=c,this.lastTime=0,this.currentTime=0,this.delta=0,this.animationFrame=0,this.stiffness=u,this.damping=p,this.mass=r,this._input=a,this.output=this.input;const h=(o,n,m)=>o*(m-n)/100+n;this.interpolate=()=>{const o=h(this.stiffness,-1,-300),n=h(this.damping,-.4,-20),m=h(this.mass,.1,10),d=o*(this.output-this.input),f=n*this.velocity;this.amplitude=(d+f)/m,this.velocity+=this.amplitude*(this.delta/1e3),this.output+=this.velocity*(this.delta/1e3)},this.animLoop=()=>{this.currentTime=Date.now(),this.animating||(this.lastTime=this.currentTime-1),this.delta=this.currentTime-this.lastTime,this.lastTime=this.currentTime,this.animating=!0,this.interpolate(),this.onFrame(this.output,this.velocity),this.animating=!(Math.abs(this.velocity)<.2&&Math.abs(this.output-this.input)<.2),this.animating?(cancelAnimationFrame(this.animationFrame),this.animationFrame=requestAnimationFrame(this.animLoop)):(this.animating=!1,this.onFinished())},this.animate=()=>{this.animating||this.animLoop()}}set input(a){this._input=a,this.animate()}get input(){return this._input}}s.Springify=i,Object.defineProperties(s,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
