!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define("springify",n):(t=t||self).springify=n()}(this,function(){"use strict";return function(){for(var t=this,n=[],i=arguments.length;i--;)n[i]=arguments[i];this.animating=!1;var e,a,p,o,s=0,u=10,m=30,r=20,f={output:0,velocity:0,amplitude:0},c=[],l=function(t,n,i){return t*(i-n)/100+n};n.map(function(n){void 0!==n.propName?(t[n.propName]=Object.assign({},f),t[n.propName].stiffness=n.input||s,t[n.propName].stiffness=n.stiffness||u,t[n.propName].damping=n.damping||m,t[n.propName].mass=n.mass||r,t[n.propName].input=n.input||s,t[n.propName].output=t[n.propName].input,c.push(t[n.propName])):t.callback=n});var d=function(){var n;a=Date.now(),t.animating||(e=a-1),p=a-e,e=a,t.animating=!0,c.forEach(function(t){var n,i,e,a,o,s;i=l((n=t).stiffness,-1,-300),e=l(n.damping,-.4,-20),a=l(n.mass,.1,10),o=i*(n.output-n.input),s=e*n.velocity,n.amplitude=(o+s)/a,n.velocity+=n.amplitude*(p/1e3),n.output+=n.velocity*(p/1e3)}),(n=t).callback.apply(n,c),c.every(function(t){return Math.abs(t.velocity)<.5&&Math.abs(t.output-t.input)<.5})?(t.animating=!1,console.log("finished spring animation")):(cancelAnimationFrame(o),o=requestAnimationFrame(d))};this.animate=function(){t.animating||d()}}});